(this["webpackJsonpBook-search"]=this["webpackJsonpBook-search"]||[]).push([[0],{12:function(e,t,a){e.exports={cardBack:"BookCard_cardBack__1zo44",imageWrapper:"BookCard_imageWrapper__3fWkM",image:"BookCard_image__gdMND",title:"BookCard_title__GQym8",authors:"BookCard_authors__MJ3_F",categories:"BookCard_categories__6qln5"}},15:function(e,t,a){e.exports={countLabel:"BooksList_countLabel__CGU67",booksList:"BooksList_booksList__5uUM_",buttonWrapper:"BooksList_buttonWrapper__3UfRE",button:"BooksList_button__3mGnd",buttonLoader:"BooksList_buttonLoader__3M4bV"}},38:function(e,t,a){e.exports={app:"App_app__FTUfN"}},4:function(e,t,a){e.exports={bookPage:"BookPage_bookPage__3Ossa",title:"BookPage_title__3tbhU",authors:"BookPage_authors__3DE0N",categories:"BookPage_categories__2qUbI",publishedDate:"BookPage_publishedDate__1Yl9Z",description:"BookPage_description__1yZ5A",rating:"BookPage_rating__3IBT_",imageWrapper:"BookPage_imageWrapper__2ySue",image:"BookPage_image__2-Pft",amount:"BookPage_amount__1OCxG",buyLink:"BookPage_buyLink__2uDDe",starImage:"BookPage_starImage__3XwT8",noSale:"BookPage_noSale__2ahat"}},42:function(e,t,a){e.exports={loader:"Loader_loader__3UQyJ",load7:"Loader_load7__36mvu"}},43:function(e,t,a){e.exports={errorPage:"ErrorPage_errorPage__nXV-5"}},5:function(e,t,a){e.exports={header:"Header_header__1nsYt",title:"Header_title__2KzaL",errorInput:"Header_errorInput__3aVqc",searchInput:"Header_searchInput__DGK_R",searchWrapper:"Header_searchWrapper__1OoEB",searchButton:"Header_searchButton__33dnW",searchIcon:"Header_searchIcon__m6sqZ",select:"Header_select__sJy7L",selectLabel:"Header_selectLabel__3TQrI",selectWrapperEnd:"Header_selectWrapperEnd__2y11d",selectWrapperStart:"Header_selectWrapperStart__2MUQa"}},78:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(21),c=a.n(s),o=a(38),i=a.n(o),u=a(14),l=a(5),d=a.n(l),b=a.p+"static/media/Search-icon.bf9552ec.svg",j=a(11),h=a.n(j),_=a(23),p=a(29),g=a(3),O=a(39).create({baseURL:" https://www.googleapis.com/books/v1/volumes",params:{key:"AIzaSyAidoL8vCQp91a5ZQ0a6Qeds5B9X2PLJWc",maxResults:30}}),m=function(e,t){return"all"===t?e:"".concat(e,"+subject:").concat(t)},v=function(e,t,a,r){return O.get("",{params:{q:m(e,a),orderBy:t,startIndex:r}})},x=function(e){return O.get(e)},f=a.p+"static/media/No_image_available.1edd6fd3.svg",k="SET_BOOKS",L="SET_BOOKS_COUNT",y="CHOOSE_BOOK",B="SET_LOADING",N="SET_MORE_LOADING",E="SET_MORE_BOOKS",C="SET_ERROR",S="SET_TEXT_ERROR",I={hasError:!1,hasTextError:!1,isLoading:!1,isMoreLoading:!1,searchText:null,orderBy:null,category:null,currentBook:{title:null,categories:[],authors:[],publishedDate:null,description:null,averageRating:null,ratingsCount:null,imageLink:null,amount:null,currency:null,buyLink:null},booksList:[],booksCount:null},P=function(e,t,a,r){return{type:k,booksList:e,searchText:t,orderBy:a,category:r}},T=function(e){return{type:B,isLoading:e}},W=function(e){return{type:C,hasError:e}},w=function(e){return{type:S,hasErorr:e}},D=function(e){return{type:N,isMoreLoading:e}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(g.a)(Object(g.a)({},e),{},{isLoading:t.isLoading});case N:return Object(g.a)(Object(g.a)({},e),{},{isMoreLoading:t.isMoreLoading});case k:return Object(g.a)(Object(g.a)({},e),{},{searchText:t.searchText,orderBy:t.orderBy,category:t.category,booksList:t.booksList});case E:return Object(g.a)(Object(g.a)({},e),{},{booksList:[].concat(Object(p.a)(e.booksList),Object(p.a)(t.booksList))});case C:return Object(g.a)(Object(g.a)({},e),{},{hasError:t.hasError});case S:return Object(g.a)(Object(g.a)({},e),{},{hasTextError:t.hasErorr});case y:return Object(g.a)(Object(g.a)({},e),{},{currentBook:t.currentBook});case L:return Object(g.a)(Object(g.a)({},e),{},{booksCount:t.booksCount});default:return e}},M=a(6),H=a(2),U=a(1),F=function(){var e=Object(M.c)((function(e){return e.hasTextError})),t=Object(M.b)(),a=Object(H.f)(),r=n.a.useState(""),s=Object(u.a)(r,2),c=s[0],o=s[1],i=n.a.useState("all"),l=Object(u.a)(i,2),j=l[0],p=l[1],g=n.a.useState("relevance"),O=Object(u.a)(g,2),m=O[0],x=O[1];return Object(U.jsxs)("form",{className:d.a.header,onSubmit:function(e){e.preventDefault(),t(function(e,t,a){return function(){var r=Object(_.a)(h.a.mark((function r(n){var s;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=3;break}return n(w(!0)),r.abrupt("return");case 3:return n(w(!1)),n(T(!0)),r.next=7,v(e,t,a,0);case 7:200===(s=r.sent).status?(n(P(s.data.items,e,t,a)),n((c=s.data.totalItems,{type:L,booksCount:c})),n(W(!1))):n(W(!0)),n(T(!1));case 10:case"end":return r.stop()}var c}),r)})));return function(e){return r.apply(this,arguments)}}()}(c,m,j)),c&&a.push("/search")},children:[Object(U.jsx)("span",{className:d.a.title,children:"Search for books"}),Object(U.jsxs)("div",{className:d.a.searchWrapper,children:[Object(U.jsx)("input",{name:"search",type:"text",autoComplete:"off",className:e?"".concat(d.a.searchInput," ").concat(d.a.errorInput):d.a.searchInput,value:c,onChange:function(e){o(e.target.value)}}),Object(U.jsx)("button",{type:"submit",className:d.a.searchButton,children:Object(U.jsx)("img",{className:d.a.searchIcon,src:b,alt:""})})]}),Object(U.jsxs)("div",{className:d.a.selectWrapperEnd,children:[Object(U.jsx)("span",{className:d.a.selectLabel,children:"Category:"}),Object(U.jsx)("select",{value:j,onChange:function(e){p(e.target.value)},className:d.a.select,name:"categories",id:"categories-select",children:["all","art","biography","computers","history","medical","poetry"].map((function(e){return Object(U.jsx)("option",{value:e,children:e},e)}))})]}),Object(U.jsxs)("div",{className:d.a.selectWrapperStart,children:[Object(U.jsx)("span",{className:d.a.selectLabel,children:"Sorting by"}),Object(U.jsxs)("select",{value:m,onChange:function(e){x(e.target.value)},className:d.a.select,name:"sort",id:"sort-select",children:[Object(U.jsx)("option",{value:"relevance",children:"relevance"}),Object(U.jsx)("option",{value:"newest",children:"newest"})]})]})]})},G=a(15),Q=a.n(G),A=a(12),J=a.n(A),K=function(e){var t,a,r=e.id,n=e.title,s=e.authors,c=e.categories,o=e.photoLink;s=(null===(t=s)||void 0===t?void 0:t.length)>3?s.slice(0,3).join(", "):null===(a=s)||void 0===a?void 0:a.join(", ");var i=Object(H.f)();return Object(U.jsxs)("div",{className:J.a.cardBack,onClick:function(){i.push("/book/".concat(r))},children:[Object(U.jsx)("div",{className:J.a.imageWrapper,children:Object(U.jsx)("img",{className:J.a.image,src:o||f,alt:""})}),Object(U.jsx)("div",{className:J.a.categories,children:null===c||void 0===c?void 0:c.slice(0,1)}),Object(U.jsx)("div",{className:J.a.authors,children:s}),Object(U.jsx)("div",{className:J.a.title,children:n})]})},q=a(42),X=a.n(q),Z=function(){return Object(U.jsx)("div",{className:X.a.loader,children:"Loading..."})},z=function(){var e=Object(M.b)(),t=Object(M.c)((function(e){return e})),a=t.isMoreLoading,r=t.searchText,s=t.orderBy,c=t.category,o=t.booksCount,i=t.booksList,l=t.isLoading,d=n.a.useState(30),b=Object(u.a)(d,2),j=b[0],p=b[1],g=function(){p((function(e){return e+30})),e(function(e,t,a,r){return function(){var n=Object(_.a)(h.a.mark((function n(s){var c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(D(!0)),n.next=3,v(e,t,a,r);case 3:200===(c=n.sent).status?s((o=c.data.items,{type:E,booksList:o})):s(W(!0)),s(D(!1));case 6:case"end":return n.stop()}var o}),n)})));return function(e){return n.apply(this,arguments)}}()}(r,s,c,j))};return l?Object(U.jsx)(Z,{}):null===o?Object(U.jsx)(U.Fragment,{}):Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{className:Q.a.countLabel,children:["found ",o," books"]}),Object(U.jsx)("div",{className:Q.a.booksList,children:null===i||void 0===i?void 0:i.map((function(e){var t,a=e.id,r=e.volumeInfo;return Object(U.jsx)(K,{id:a,title:r.title,authors:r.authors,categories:r.categories,photoLink:null===(t=r.imageLinks)||void 0===t?void 0:t.thumbnail},a)}))}),Object(U.jsx)("div",{className:Q.a.buttonWrapper,children:a?Object(U.jsx)("div",{className:Q.a.buttonLoader,children:Object(U.jsx)(Z,{})}):o-j>30?Object(U.jsx)("button",{className:Q.a.button,type:"button",onClick:g,children:"Load more"}):void 0})]})},V=a(4),Y=a.n(V),$=a.p+"static/media/star.de82f684.svg",ee=function(){var e=Object(H.g)().id,t=Object(M.c)((function(e){return e.isLoading})),a=Object(M.b)(),r=Object(M.c)((function(e){return e.currentBook})),s=r.title,c=r.categories,o=r.authors,i=r.publishedDate,u=r.description,l=r.averageRating,d=r.ratingsCount,b=r.imageLink,j=r.amount,p=r.currency,g=r.buyLink;return n.a.useEffect((function(){a(function(e){return function(){var t=Object(_.a)(h.a.mark((function t(a){var r,n,s,c,o,i,u,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(T(!0)),t.next=3,x(e);case 3:200===(r=t.sent).status?(o=r.data,i=o.volumeInfo,u=o.saleInfo,l={title:i.title,categories:i.categories,authors:i.authors,publishedDate:i.publishedDate,description:i.description,averageRating:i.averageRating,ratingsCount:i.ratingsCount,imageLink:(null===i||void 0===i||null===(n=i.imageLinks)||void 0===n?void 0:n.thumbnail)||f,amount:null===(s=u.listPrice)||void 0===s?void 0:s.amount,currency:null===(c=u.listPrice)||void 0===c?void 0:c.currencyCode,buyLink:u.buyLink},a(W(!1)),a({type:y,currentBook:l})):a(W(!0)),a(T(!1));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))}),[a,e]),t?Object(U.jsx)(Z,{}):Object(U.jsxs)("div",{className:Y.a.bookPage,children:[Object(U.jsx)("div",{className:Y.a.title,children:s}),Object(U.jsxs)("div",{className:Y.a.categories,children:["categories: ",null===c||void 0===c?void 0:c.join(", ")]}),Object(U.jsx)("div",{className:Y.a.authors,children:null===o||void 0===o?void 0:o.join(", ")}),Object(U.jsxs)("div",{className:Y.a.publishedDate,children:["publication date: ",i]}),Object(U.jsx)("div",{className:Y.a.description,children:Object(U.jsx)("div",{dangerouslySetInnerHTML:{__html:u}})}),d?Object(U.jsxs)("div",{className:Y.a.rating,children:[Object(U.jsxs)("div",{children:[Object(U.jsx)("img",{className:Y.a.starImage,src:$,alt:""}),l,"/5"]}),Object(U.jsxs)("div",{children:["votes:",d]})]}):Object(U.jsx)("div",{className:Y.a.rating,children:"No reviews yet"}),Object(U.jsx)("div",{className:Y.a.imageWrapper,children:Object(U.jsx)("img",{className:Y.a.image,src:b,alt:""})}),j?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{className:Y.a.amount,children:[j," ",p]}),Object(U.jsx)("div",{className:Y.a.buyLink,children:Object(U.jsx)("a",{href:g,children:"Buy"})})]}):Object(U.jsx)("div",{className:"".concat(Y.a.buyLink," ").concat(Y.a.noSale),children:"Not for sale"})]})},te=a(43),ae=a.n(te),re=function(){return Object(U.jsxs)("div",{className:ae.a.errorPage,children:[Object(U.jsx)("div",{children:"Something went wrong"}),Object(U.jsx)("div",{children:"Try again later"})]})};var ne=function(){return Object(M.c)((function(e){return e.hasError}))?Object(U.jsx)(re,{}):Object(U.jsxs)("div",{className:i.a.app,children:[Object(U.jsx)(F,{}),Object(U.jsxs)(H.c,{children:[Object(U.jsx)(H.a,{path:"/book/:id",children:Object(U.jsx)(ee,{})}),Object(U.jsx)(H.a,{path:"/search",children:Object(U.jsx)(z,{})})]})]})},se=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,80)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),s(e),c(e)}))},ce=(a(78),a(28)),oe=a(44),ie=Object(ce.b)(R,Object(ce.a)(oe.a));window.store=ie;var ue=ie,le=a(16);c.a.render(Object(U.jsx)(n.a.StrictMode,{children:Object(U.jsx)(le.a,{children:Object(U.jsx)(M.a,{store:ue,children:Object(U.jsx)(ne,{})})})}),document.getElementById("root")),se()}},[[79,1,2]]]);
//# sourceMappingURL=main.d84a4cf9.chunk.js.map